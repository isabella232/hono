<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1050" height="669.6" contentScriptType="application/ecmascript" contentStyleType="text/css" style="width:1050px;height:669px" preserveAspectRatio="none" version="1.1" viewBox="0 0 1050 669" zoomAndPan="magnify"><defs><filter id="fngzrirs0jsbq" width="300%" height="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.4"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.8" dy="4.8" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect style="stroke:#a80036;stroke-width:1.2" width="12" height="414.712" x="472.2" y="177.394" fill="#FFF" filter="url(#fngzrirs0jsbq)"/><rect style="stroke:#a80036;stroke-width:1.2" width="12" height="332.794" x="912.6" y="259.313" fill="#FFF" filter="url(#fngzrirs0jsbq)"/><rect style="stroke:#000;stroke-width:2.4" width="888" height="137.438" x="98.4" y="131.475" fill="#FFF" filter="url(#fngzrirs0jsbq)"/><rect style="stroke:#000;stroke-width:2.4" width="938.4" height="208.716" x="98.4" y="285.712" fill="#FFF" filter="url(#fngzrirs0jsbq)"/><rect style="stroke:#000;stroke-width:2.4" width="888" height="90.478" x="98.4" y="511.228" fill="#FFF" filter="url(#fngzrirs0jsbq)"/><line style="stroke:#a80036;stroke-width:1.2;stroke-dasharray:5,5" x1="148.8" x2="148.8" y1="45.956" y2="622.106"/><line style="stroke:#a80036;stroke-width:1.2;stroke-dasharray:5,5" x1="478.2" x2="478.2" y1="45.956" y2="622.106"/><line style="stroke:#a80036;stroke-width:1.2;stroke-dasharray:5,5" x1="918" x2="918" y1="45.956" y2="622.106"/><rect style="stroke:#a80036;stroke-width:1.7999999999999998" width="73.2" height="36.356" x="110.4" y="3.6" fill="#FEFECE" filter="url(#fngzrirs0jsbq)"/><text x="118.8" y="27.594" fill="#000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="56.4">Device</text><rect style="stroke:#a80036;stroke-width:1.7999999999999998" width="73.2" height="36.356" x="110.4" y="620.906" fill="#FEFECE" filter="url(#fngzrirs0jsbq)"/><text x="118.8" y="644.9" fill="#000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="56.4">Device</text><rect style="stroke:#a80036;stroke-width:1.7999999999999998" width="204" height="36.356" x="373.8" y="3.6" fill="#FEFECE" filter="url(#fngzrirs0jsbq)"/><text x="382.2" y="27.594" fill="#000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="187.2">Hono Protocol Adapter</text><rect style="stroke:#a80036;stroke-width:1.7999999999999998" width="204" height="36.356" x="373.8" y="620.906" fill="#FEFECE" filter="url(#fngzrirs0jsbq)"/><text x="382.2" y="644.9" fill="#000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="187.2">Hono Protocol Adapter</text><rect style="stroke:#a80036;stroke-width:1.7999999999999998" width="106.8" height="36.356" x="862.8" y="3.6" fill="#FEFECE" filter="url(#fngzrirs0jsbq)"/><text x="871.2" y="27.594" fill="#000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="90">Application</text><rect style="stroke:#a80036;stroke-width:1.7999999999999998" width="106.8" height="36.356" x="862.8" y="620.906" fill="#FEFECE" filter="url(#fngzrirs0jsbq)"/><text x="871.2" y="644.9" fill="#000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="90">Application</text><rect style="stroke:#a80036;stroke-width:1.2" width="12" height="414.712" x="472.2" y="177.394" fill="#FFF" filter="url(#fngzrirs0jsbq)"/><rect style="stroke:#a80036;stroke-width:1.2" width="12" height="332.794" x="912.6" y="259.313" fill="#FFF" filter="url(#fngzrirs0jsbq)"/><path fill="#FBFB77" d="M9.6,63.9563 L9.6,111.9563 L285.6,111.9563 L285.6,75.9563 L273.6,63.9563 L9.6,63.9563" filter="url(#fngzrirs0jsbq)" style="stroke:#a80036;stroke-width:1.2"/><path fill="#FBFB77" d="M273.6,63.9563 L273.6,75.9563 L285.6,75.9563 L273.6,63.9563" style="stroke:#a80036;stroke-width:1.2"/><text x="16.8" y="84.436" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="217.2">The device is connected and</text><text x="16.8" y="102.596" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="250.8">authenticated with TENANT/4711</text><path fill="#EEE" d="M98.4,131.475 L357.6,131.475 L357.6,139.875 L345.6,151.875 L98.4,151.875 L98.4,131.475" style="stroke:#000;stroke-width:1.2"/><rect style="stroke:#000;stroke-width:2.4" width="888" height="137.438" x="98.4" y="131.475" fill="none"/><text x="116.4" y="147.155" fill="#000" font-family="sans-serif" font-size="15.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="205.2">Command subscription</text><polygon fill="#A80036" points="457.8 172.594 469.8 177.394 457.8 182.194 462.6 177.394" style="stroke:#a80036;stroke-width:1.2"/><line style="stroke:#a80036;stroke-width:1.2" x1="149.4" x2="465" y1="177.394" y2="177.394"/><text x="157.8" y="171.315" fill="#000" font-family="sans-serif" font-size="15.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8">1</text><text x="173.4" y="171.315" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="284.4">Command subscription / TTD request</text><path fill="#FBFB77" d="M273.6,192.9938 L273.6,222.9938 L678,222.9938 L678,204.9938 L666,192.9938 L273.6,192.9938" filter="url(#fngzrirs0jsbq)" style="stroke:#a80036;stroke-width:1.2"/><path fill="#FBFB77" d="M666,192.9938 L666,204.9938 L678,204.9938 L666,192.9938" style="stroke:#a80036;stroke-width:1.2"/><text x="280.8" y="213.474" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="379.2">Ensure Command consumer link for tenant exists</text><polygon fill="#A80036" points="898.2 254.512 910.2 259.313 898.2 264.113 903 259.313" style="stroke:#a80036;stroke-width:1.2"/><line style="stroke:#a80036;stroke-width:1.2" x1="484.2" x2="905.4" y1="259.313" y2="259.313"/><text x="492.6" y="253.233" fill="#000" font-family="sans-serif" font-size="15.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8">2</text><text x="508.2" y="253.233" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="350.4">transfer(&quot;event/TENANT&quot;,&quot;4711&quot;,&quot;ttd=${ttd}&quot;)</text><path fill="#EEE" d="M98.4,285.7125 L325.2,285.7125 L325.2,294.1125 L313.2,306.1125 L98.4,306.1125 L98.4,285.7125" style="stroke:#000;stroke-width:1.2"/><rect style="stroke:#000;stroke-width:2.4" width="938.4" height="208.716" x="98.4" y="285.712" fill="none"/><text x="116.4" y="301.393" fill="#000" font-family="sans-serif" font-size="15.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="172.8">Command handling</text><path fill="#FBFB77" d="M812.4,312.2719 L812.4,360.2719 L1020,360.2719 L1020,324.2719 L1008,312.2719 L812.4,312.2719" filter="url(#fngzrirs0jsbq)" style="stroke:#a80036;stroke-width:1.2"/><path fill="#FBFB77" d="M1008,312.2719 L1008,324.2719 L1020,324.2719 L1008,312.2719" style="stroke:#a80036;stroke-width:1.2"/><text x="819.6" y="332.752" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="172.8">Create sender link and</text><text x="819.6" y="350.911" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="182.4">response consumer link</text><polygon fill="#A80036" points="497.4 410.109 485.4 414.909 497.4 419.709 492.6 414.909" style="stroke:#a80036;stroke-width:1.2"/><line style="stroke:#a80036;stroke-width:1.2" x1="490.2" x2="911.4" y1="414.909" y2="414.909"/><text x="504.6" y="399.751" fill="#000" font-family="sans-serif" font-size="15.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8">3</text><text x="520.2" y="390.671" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="226.8">transfer(&quot;command/TENANT&quot;,</text><text x="525" y="408.83" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="310.8">&quot;command/TENANT/4711&quot;,&quot;${payload}&quot;)</text><polygon fill="#A80036" points="162.6 445.069 150.6 449.869 162.6 454.669 157.8 449.869" style="stroke:#a80036;stroke-width:1.2"/><line style="stroke:#a80036;stroke-width:1.2" x1="155.4" x2="471" y1="449.869" y2="449.869"/><text x="169.8" y="443.79" fill="#000" font-family="sans-serif" font-size="15.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8">4</text><text x="185.4" y="443.79" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="249.6">Command is published to device</text><polygon fill="#A80036" points="898.2 480.028 910.2 484.828 898.2 489.628 903 484.828" style="stroke:#a80036;stroke-width:1.2"/><line style="stroke:#a80036;stroke-width:1.2" x1="484.2" x2="905.4" y1="484.828" y2="484.828"/><text x="492.6" y="478.749" fill="#000" font-family="sans-serif" font-size="15.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8">5</text><text x="508.2" y="478.749" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="176.4">disposition(&quot;accepted&quot;)</text><path fill="#EEE" d="M98.4,511.2281 L412.8,511.2281 L412.8,519.6281 L400.8,531.6281 L98.4,531.6281 L98.4,511.2281" style="stroke:#000;stroke-width:1.2"/><rect style="stroke:#000;stroke-width:2.4" width="888" height="90.478" x="98.4" y="511.228" fill="none"/><text x="116.4" y="526.908" fill="#000" font-family="sans-serif" font-size="15.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="260.4">Command response handling</text><polygon fill="#A80036" points="457.8 552.347 469.8 557.147 457.8 561.947 462.6 557.147" style="stroke:#a80036;stroke-width:1.2"/><line style="stroke:#a80036;stroke-width:1.2" x1="149.4" x2="465" y1="557.147" y2="557.147"/><text x="157.8" y="551.068" fill="#000" font-family="sans-serif" font-size="15.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8">6</text><text x="173.4" y="551.068" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="260.4">Device sends command response</text><polygon fill="#A80036" points="904.2 587.306 916.2 592.106 904.2 596.906 909 592.106" style="stroke:#a80036;stroke-width:1.2"/><line style="stroke:#a80036;stroke-width:1.2" x1="478.2" x2="911.4" y1="592.106" y2="592.106"/><text x="486.6" y="586.027" fill="#000" font-family="sans-serif" font-size="15.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8">7</text><text x="502.2" y="586.027" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="384">transfer(&quot;${reply-to}&quot;,&quot;status=200&quot;,&quot;${payload}&quot;)</text></g></svg>