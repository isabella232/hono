<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1086" height="663.6" contentScriptType="application/ecmascript" contentStyleType="text/css" style="width:1086px;height:663px" preserveAspectRatio="none" version="1.1" viewBox="0 0 1086 663" zoomAndPan="magnify"><defs><filter id="f1dgeg840p9dw" width="300%" height="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.4"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.8" dy="4.8" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect style="stroke:#a80036;stroke-width:1.2" width="12" height="376.313" x="1015.8" y="218.353" fill="#FFF" filter="url(#f1dgeg840p9dw)"/><line style="stroke:#a80036;stroke-width:1.2;stroke-dasharray:5,5" x1="148.8" x2="148.8" y1="45.956" y2="616.266"/><line style="stroke:#a80036;stroke-width:1.2;stroke-dasharray:5,5" x1="582" x2="582" y1="45.956" y2="616.266"/><line style="stroke:#a80036;stroke-width:1.2;stroke-dasharray:5,5" x1="1021.2" x2="1021.2" y1="45.956" y2="616.266"/><rect style="stroke:#a80036;stroke-width:1.7999999999999998" width="73.2" height="36.356" x="110.4" y="3.6" fill="#FEFECE" filter="url(#f1dgeg840p9dw)"/><text x="118.8" y="27.594" fill="#000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="56.4">Device</text><rect style="stroke:#a80036;stroke-width:1.7999999999999998" width="73.2" height="36.356" x="110.4" y="615.066" fill="#FEFECE" filter="url(#f1dgeg840p9dw)"/><text x="118.8" y="639.06" fill="#000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="56.4">Device</text><rect style="stroke:#a80036;stroke-width:1.7999999999999998" width="135.6" height="36.356" x="512.4" y="3.6" fill="#FEFECE" filter="url(#f1dgeg840p9dw)"/><text x="520.8" y="27.594" fill="#000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="118.8">AMQP Adapter</text><rect style="stroke:#a80036;stroke-width:1.7999999999999998" width="135.6" height="36.356" x="512.4" y="615.066" fill="#FEFECE" filter="url(#f1dgeg840p9dw)"/><text x="520.8" y="639.06" fill="#000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="118.8">AMQP Adapter</text><rect style="stroke:#a80036;stroke-width:1.7999999999999998" width="106.8" height="36.356" x="966" y="3.6" fill="#FEFECE" filter="url(#f1dgeg840p9dw)"/><text x="974.4" y="27.594" fill="#000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="90">Application</text><rect style="stroke:#a80036;stroke-width:1.7999999999999998" width="106.8" height="36.356" x="966" y="615.066" fill="#FEFECE" filter="url(#f1dgeg840p9dw)"/><text x="974.4" y="639.06" fill="#000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="90">Application</text><rect style="stroke:#a80036;stroke-width:1.2" width="12" height="376.313" x="1015.8" y="218.353" fill="#FFF" filter="url(#f1dgeg840p9dw)"/><path fill="#FBFB77" d="M9.6,63.9563 L9.6,111.9563 L285.6,111.9563 L285.6,75.9563 L273.6,63.9563 L9.6,63.9563" filter="url(#f1dgeg840p9dw)" style="stroke:#a80036;stroke-width:1.2"/><path fill="#FBFB77" d="M273.6,63.9563 L273.6,75.9563 L285.6,75.9563 L273.6,63.9563" style="stroke:#a80036;stroke-width:1.2"/><text x="16.8" y="84.436" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="217.2">The device is connected and</text><text x="16.8" y="102.596" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="250.8">authenticated with TENANT/4711</text><polygon fill="#A80036" points="568.2 143.634 580.2 148.434 568.2 153.234 573 148.434" style="stroke:#a80036;stroke-width:1.2"/><line style="stroke:#a80036;stroke-width:1.2" x1="149.4" x2="575.4" y1="148.434" y2="148.434"/><text x="157.8" y="142.355" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="253.2">1. attach(&quot;receiver&quot;, &quot;command&quot;)</text><polygon fill="#A80036" points="162.6 178.594 150.6 183.394 162.6 188.194 157.8 183.394" style="stroke:#a80036;stroke-width:1.2"/><line style="stroke:#a80036;stroke-width:1.2" x1="155.4" x2="581.4" y1="183.394" y2="183.394"/><text x="169.8" y="177.315" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="244.8">2. attach(&quot;sender&quot;, &quot;command&quot;)</text><polygon fill="#A80036" points="1001.4 213.553 1013.4 218.353 1001.4 223.153 1006.2 218.353" style="stroke:#a80036;stroke-width:1.2"/><line style="stroke:#a80036;stroke-width:1.2" x1="582.6" x2="1008.6" y1="218.353" y2="218.353"/><text x="591" y="212.274" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="334.8">3. transfer(&quot;event/TENANT&quot;,&quot;4711&quot;,&quot;ttd=-1&quot;)</text><polygon fill="#A80036" points="595.8 248.512 583.8 253.313 595.8 258.113 591 253.313" style="stroke:#a80036;stroke-width:1.2"/><line style="stroke:#a80036;stroke-width:1.2" x1="588.6" x2="1014.6" y1="253.313" y2="253.313"/><text x="603" y="247.233" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="380.4">4. transfer(&quot;command/TENANT/4711&quot;,&quot;light&quot;,&quot;ON&quot;)</text><path fill="#FBFB77" d="M386.4,268.9125 L386.4,334.9125 L774,334.9125 L774,280.9125 L762,268.9125 L386.4,268.9125" filter="url(#f1dgeg840p9dw)" style="stroke:#a80036;stroke-width:1.2"/><path fill="#FBFB77" d="M762,268.9125 L762,280.9125 L774,280.9125 L762,268.9125" style="stroke:#a80036;stroke-width:1.2"/><text x="393.6" y="289.393" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="291.6">The command message is sent to the</text><text x="393.6" y="307.552" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="303.6">device with the &apos;reply-to&apos; property set to</text><text x="393.6" y="325.712" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="362.4">&quot;command_response/TENANT/4711/${replyId}&quot;</text><polygon fill="#A80036" points="162.6 366.75 150.6 371.55 162.6 376.35 157.8 371.55" style="stroke:#a80036;stroke-width:1.2"/><line style="stroke:#a80036;stroke-width:1.2" x1="155.4" x2="581.4" y1="371.55" y2="371.55"/><text x="169.8" y="365.471" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="380.4">5. transfer(&quot;command/TENANT/4711&quot;,&quot;light&quot;,&quot;ON&quot;)</text><path fill="#FBFB77" d="M28.8,387.15 L28.8,453.15 L265.2,453.15 L265.2,399.15 L253.2,387.15 L28.8,387.15" filter="url(#f1dgeg840p9dw)" style="stroke:#a80036;stroke-width:1.2"/><path fill="#FBFB77" d="M253.2,387.15 L253.2,399.15 L265.2,399.15 L253.2,387.15" style="stroke:#a80036;stroke-width:1.2"/><text x="36" y="407.63" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="192">In order to send back the</text><text x="36" y="425.79" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="211.2">response, the device opens</text><text x="36" y="443.949" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="201.6">an anonymous sender link</text><polygon fill="#A80036" points="568.2 484.988 580.2 489.788 568.2 494.587 573 489.788" style="stroke:#a80036;stroke-width:1.2"/><line style="stroke:#a80036;stroke-width:1.2" x1="149.4" x2="575.4" y1="489.788" y2="489.788"/><text x="157.8" y="483.708" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="181.2">6. attach(&quot;sender&quot;, null)</text><polygon fill="#A80036" points="162.6 519.947 150.6 524.747 162.6 529.547 157.8 524.747" style="stroke:#a80036;stroke-width:1.2"/><line style="stroke:#a80036;stroke-width:1.2" x1="155.4" x2="581.4" y1="524.747" y2="524.747"/><text x="169.8" y="518.668" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="189.6">7. attach(&quot;receiver&quot;, null)</text><polygon fill="#A80036" points="568.2 554.906 580.2 559.706 568.2 564.506 573 559.706" style="stroke:#a80036;stroke-width:1.2"/><line style="stroke:#a80036;stroke-width:1.2" x1="149.4" x2="575.4" y1="559.706" y2="559.706"/><text x="157.8" y="553.627" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="404.4">8. transfer(&quot;${reply-to}&quot;,&quot;status=200&quot;,&quot;lumen=100&quot;)</text><polygon fill="#A80036" points="1007.4 589.866 1019.4 594.666 1007.4 599.466 1012.2 594.666" style="stroke:#a80036;stroke-width:1.2"/><line style="stroke:#a80036;stroke-width:1.2" x1="582.6" x2="1014.6" y1="594.666" y2="594.666"/><text x="591" y="588.587" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="404.4">9. transfer(&quot;${reply-to}&quot;,&quot;status=200&quot;,&quot;lumen=100&quot;)</text></g></svg>