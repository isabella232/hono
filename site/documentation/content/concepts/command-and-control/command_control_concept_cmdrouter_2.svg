<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1120.8" height="620.4" contentScriptType="application/ecmascript" contentStyleType="text/css" style="width:1120px;height:620px" preserveAspectRatio="none" version="1.1" viewBox="0 0 1120 620" zoomAndPan="magnify"><defs><filter id="fy2i4od8bk6uu" width="300%" height="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.4"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.8" dy="4.8" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect style="stroke:#a80036;stroke-width:1.2" width="349.2" height="594.141" x="201.6" y="4.8" fill="#DDD"/><text x="353.4" y="19.28" fill="#000" font-family="sans-serif" font-size="15.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="45.6">Hono</text><rect style="stroke:#a80036;stroke-width:1.2" width="12" height="118.237" x="456" y="316.706" fill="#FFF" filter="url(#fy2i4od8bk6uu)"/><rect style="stroke:#a80036;stroke-width:1.2" width="12" height="53.119" x="822" y="434.944" fill="#FFF" filter="url(#fy2i4od8bk6uu)"/><rect style="stroke:#000;stroke-width:2.4" width="1092.6" height="475.669" x="15.6" y="110.072" fill="#FFF" filter="url(#fy2i4od8bk6uu)"/><line style="stroke:#a80036;stroke-width:1.2;stroke-dasharray:5,5" x1="66" x2="66" y1="89.672" y2="606.141"/><line style="stroke:#a80036;stroke-width:1.2;stroke-dasharray:5,5" x1="285.6" x2="285.6" y1="89.672" y2="606.141"/><line style="stroke:#a80036;stroke-width:1.2;stroke-dasharray:5,5" x1="462" x2="462" y1="89.672" y2="606.141"/><line style="stroke:#a80036;stroke-width:1.2;stroke-dasharray:5,5" x1="827.4" x2="827.4" y1="89.672" y2="606.141"/><line style="stroke:#a80036;stroke-width:1.2;stroke-dasharray:5,5" x1="1039.8" x2="1039.8" y1="89.672" y2="606.141"/><rect style="stroke:#a80036;stroke-width:1.7999999999999998" width="73.2" height="36.356" x="27.6" y="47.316" fill="#FEFECE" filter="url(#fy2i4od8bk6uu)"/><text x="36" y="71.31" fill="#000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="56.4">Device</text><rect style="stroke:#a80036;stroke-width:1.7999999999999998" width="154.8" height="55.913" x="206.4" y="27.759" fill="#FEFECE" filter="url(#fy2i4od8bk6uu)"/><text x="214.8" y="51.754" fill="#000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="138">Protocol Adapter</text><text x="233.4" y="71.31" fill="#000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="100.8">instance #1</text><rect style="stroke:#a80036;stroke-width:1.7999999999999998" width="163.2" height="36.356" x="378" y="47.316" fill="#FEFECE" filter="url(#fy2i4od8bk6uu)"/><text x="386.4" y="71.31" fill="#000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="146.4">Command Router</text><rect style="stroke:#a80036;stroke-width:1.7999999999999998" width="166.8" height="55.913" x="742.2" y="27.759" fill="#FEFECE" filter="url(#fy2i4od8bk6uu)"/><text x="750.6" y="51.754" fill="#000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="145.2">AMQP messaging</text><text x="792" y="71.31" fill="#000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="67.2">network</text><rect style="stroke:#a80036;stroke-width:1.7999999999999998" width="106.8" height="36.356" x="984.6" y="47.316" fill="#FEFECE" filter="url(#fy2i4od8bk6uu)"/><text x="993" y="71.31" fill="#000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="90">Application</text><rect style="stroke:#a80036;stroke-width:1.2" width="12" height="118.237" x="456" y="316.706" fill="#FFF" filter="url(#fy2i4od8bk6uu)"/><rect style="stroke:#a80036;stroke-width:1.2" width="12" height="53.119" x="822" y="434.944" fill="#FFF" filter="url(#fy2i4od8bk6uu)"/><path fill="#EEE" d="M15.6,110.0719 L242.4,110.0719 L242.4,118.4719 L230.4,130.4719 L15.6,130.4719 L15.6,110.0719" style="stroke:#000;stroke-width:1.2"/><rect style="stroke:#000;stroke-width:2.4" width="1092.6" height="475.669" x="15.6" y="110.072" fill="none"/><text x="33.6" y="125.752" fill="#000" font-family="sans-serif" font-size="15.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="172.8">Command handling</text><polygon fill="#A80036" points="841.2 187.509 829.2 192.309 841.2 197.109 836.4 192.309" style="stroke:#a80036;stroke-width:1.2"/><line style="stroke:#a80036;stroke-width:1.2" x1="834" x2="1039.2" y1="192.309" y2="192.309"/><text x="848.4" y="168.071" fill="#000" font-family="sans-serif" font-size="15.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8">1</text><text x="864" y="149.911" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="133.2">attach(&quot;receiver&quot;,</text><text x="864" y="168.071" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="168">&quot;command_response/</text><text x="868.8" y="186.23" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="157.2">TENANT/${replyId}&quot;)</text><polygon fill="#A80036" points="841.2 240.628 829.2 245.428 841.2 250.228 836.4 245.428" style="stroke:#a80036;stroke-width:1.2"/><line style="stroke:#a80036;stroke-width:1.2" x1="834" x2="1039.2" y1="245.428" y2="245.428"/><text x="848.4" y="230.269" fill="#000" font-family="sans-serif" font-size="15.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8">2</text><text x="864" y="221.19" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="124.8">attach(&quot;sender&quot;,</text><text x="864" y="239.349" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="162">&quot;command/TENANT&quot;)</text><polygon fill="#A80036" points="481.2 311.906 469.2 316.706 481.2 321.506 476.4 316.706" style="stroke:#a80036;stroke-width:1.2"/><line style="stroke:#a80036;stroke-width:1.2" x1="474" x2="1039.2" y1="316.706" y2="316.706"/><text x="488.4" y="292.468" fill="#000" font-family="sans-serif" font-size="15.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8">3</text><text x="504" y="274.308" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="226.8">transfer(&quot;command/TENANT&quot;,</text><text x="508.8" y="292.468" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="310.8">&quot;command/TENANT/4711&quot;,&quot;${payload}&quot;)</text><text x="518.4" y="310.627" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="225.6">via AMQP messaging network</text><path fill="#FBFB77" d="M319.2,332.3063 L319.2,380.3063 L600,380.3063 L600,344.3063 L588,332.3063 L319.2,332.3063" filter="url(#fy2i4od8bk6uu)" style="stroke:#a80036;stroke-width:1.2"/><path fill="#FBFB77" d="M588,332.3063 L588,344.3063 L600,344.3063 L588,332.3063" style="stroke:#a80036;stroke-width:1.2"/><text x="326.4" y="352.786" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="255.6">Determine adapter instance &quot;#1&quot;</text><text x="326.4" y="370.946" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="236.4">handling commands for &quot;4711&quot;</text><polygon fill="#A80036" points="807.6 430.144 819.6 434.944 807.6 439.744 812.4 434.944" style="stroke:#a80036;stroke-width:1.2"/><line style="stroke:#a80036;stroke-width:1.2" x1="462" x2="814.8" y1="434.944" y2="434.944"/><text x="470.4" y="419.785" fill="#000" font-family="sans-serif" font-size="15.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8">4</text><text x="486" y="410.705" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="254.4">transfer(&quot;command_internal/#1&quot;,</text><text x="490.8" y="428.865" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="310.8">&quot;command/TENANT/4711&quot;,&quot;${payload}&quot;)</text><polygon fill="#A80036" points="299.4 483.262 287.4 488.063 299.4 492.863 294.6 488.063" style="stroke:#a80036;stroke-width:1.2"/><line style="stroke:#a80036;stroke-width:1.2" x1="292.2" x2="826.8" y1="488.063" y2="488.063"/><text x="306.6" y="472.904" fill="#000" font-family="sans-serif" font-size="15.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8">5</text><text x="322.2" y="463.824" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="254.4">transfer(&quot;command_internal/#1&quot;,</text><text x="327" y="481.983" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="310.8">&quot;command/TENANT/4711&quot;,&quot;${payload}&quot;)</text><polygon fill="#A80036" points="79.8 518.222 67.8 523.022 79.8 527.822 75 523.022" style="stroke:#a80036;stroke-width:1.2"/><line style="stroke:#a80036;stroke-width:1.2" x1="72.6" x2="285" y1="523.022" y2="523.022"/><text x="87" y="516.943" fill="#000" font-family="sans-serif" font-size="15.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8">6</text><text x="102.6" y="516.943" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="175.2">Command is published</text><polygon fill="#A80036" points="1026 571.341 1038 576.141 1026 580.941 1030.8 576.141" style="stroke:#a80036;stroke-width:1.2"/><line style="stroke:#a80036;stroke-width:1.2" x1="286.2" x2="1033.2" y1="576.141" y2="576.141"/><text x="294.6" y="560.982" fill="#000" font-family="sans-serif" font-size="15.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8">7</text><text x="310.2" y="551.902" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="176.4">disposition(&quot;accepted&quot;)</text><text x="310.2" y="570.062" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="399.6">via Command Router and AMQP messaging network</text></g></svg>