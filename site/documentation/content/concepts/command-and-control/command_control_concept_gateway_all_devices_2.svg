<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1194" height="750" contentScriptType="application/ecmascript" contentStyleType="text/css" style="width:1194px;height:750px" preserveAspectRatio="none" version="1.1" viewBox="0 0 1194 750" zoomAndPan="magnify"><defs><filter id="f1h6xgtolsw5l8" width="300%" height="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.4"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.8" dy="4.8" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect style="stroke:#a80036;stroke-width:1.2" width="530.4" height="724.378" x="277.2" y="4.8" fill="#DDD"/><text x="519.6" y="19.28" fill="#000" font-family="sans-serif" font-size="15.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="45.6">Hono</text><rect style="stroke:#a80036;stroke-width:1.2" width="12" height="136.397" x="707.4" y="351.666" fill="#FFF" filter="url(#f1h6xgtolsw5l8)"/><rect style="stroke:#000;stroke-width:2.4" width="1166.4" height="605.906" x="14.4" y="110.072" fill="#FFF" filter="url(#f1h6xgtolsw5l8)"/><line style="stroke:#a80036;stroke-width:1.2;stroke-dasharray:5,5" x1="141.6" x2="141.6" y1="89.672" y2="736.378"/><line style="stroke:#a80036;stroke-width:1.2;stroke-dasharray:5,5" x1="361.2" x2="361.2" y1="89.672" y2="736.378"/><line style="stroke:#a80036;stroke-width:1.2;stroke-dasharray:5,5" x1="712.8" x2="712.8" y1="89.672" y2="736.378"/><line style="stroke:#a80036;stroke-width:1.2;stroke-dasharray:5,5" x1="900" x2="900" y1="89.672" y2="736.378"/><line style="stroke:#a80036;stroke-width:1.2;stroke-dasharray:5,5" x1="1112.4" x2="1112.4" y1="89.672" y2="736.378"/><rect style="stroke:#a80036;stroke-width:1.7999999999999998" width="87.6" height="36.356" x="96" y="47.316" fill="#FEFECE" filter="url(#f1h6xgtolsw5l8)"/><text x="104.4" y="71.31" fill="#000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="70.8">Gateway</text><rect style="stroke:#a80036;stroke-width:1.7999999999999998" width="154.8" height="55.913" x="282" y="27.759" fill="#FEFECE" filter="url(#f1h6xgtolsw5l8)"/><text x="290.4" y="51.754" fill="#000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="138">Protocol Adapter</text><text x="309" y="71.31" fill="#000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="100.8">instance #1</text><rect style="stroke:#a80036;stroke-width:1.7999999999999998" width="174" height="55.913" x="624" y="27.759" fill="#FEFECE" filter="url(#f1h6xgtolsw5l8)"/><text x="632.4" y="51.754" fill="#000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="157.2">Device Connection</text><text x="648" y="71.31" fill="#000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="126">API component</text><rect style="stroke:#a80036;stroke-width:1.7999999999999998" width="166.8" height="55.913" x="814.8" y="27.759" fill="#FEFECE" filter="url(#f1h6xgtolsw5l8)"/><text x="823.2" y="51.754" fill="#000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="145.2">AMQP messaging</text><text x="864.6" y="71.31" fill="#000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="67.2">network</text><rect style="stroke:#a80036;stroke-width:1.7999999999999998" width="106.8" height="36.356" x="1057.2" y="47.316" fill="#FEFECE" filter="url(#f1h6xgtolsw5l8)"/><text x="1065.6" y="71.31" fill="#000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="90">Application</text><rect style="stroke:#a80036;stroke-width:1.2" width="12" height="136.397" x="707.4" y="351.666" fill="#FFF" filter="url(#f1h6xgtolsw5l8)"/><path fill="#EEE" d="M14.4,110.0719 L241.2,110.0719 L241.2,118.4719 L229.2,130.4719 L14.4,130.4719 L14.4,110.0719" style="stroke:#000;stroke-width:1.2"/><rect style="stroke:#000;stroke-width:2.4" width="1166.4" height="605.906" x="14.4" y="110.072" fill="none"/><text x="32.4" y="125.752" fill="#000" font-family="sans-serif" font-size="15.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="172.8">Command handling</text><polygon fill="#A80036" points="913.8 187.509 901.8 192.309 913.8 197.109 909 192.309" style="stroke:#a80036;stroke-width:1.2"/><line style="stroke:#a80036;stroke-width:1.2" x1="906.6" x2="1111.8" y1="192.309" y2="192.309"/><text x="921" y="168.071" fill="#000" font-family="sans-serif" font-size="15.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8">1</text><text x="936.6" y="149.911" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="133.2">attach(&quot;receiver&quot;,</text><text x="936.6" y="168.071" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="168">&quot;command_response/</text><text x="941.4" y="186.23" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="157.2">TENANT/${replyId}&quot;)</text><polygon fill="#A80036" points="913.8 240.628 901.8 245.428 913.8 250.228 909 245.428" style="stroke:#a80036;stroke-width:1.2"/><line style="stroke:#a80036;stroke-width:1.2" x1="906.6" x2="1111.8" y1="245.428" y2="245.428"/><text x="921" y="230.269" fill="#000" font-family="sans-serif" font-size="15.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8">2</text><text x="936.6" y="221.19" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="124.8">attach(&quot;sender&quot;,</text><text x="936.6" y="239.349" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="162">&quot;command/TENANT&quot;)</text><polygon fill="#A80036" points="375 293.747 363 298.547 375 303.347 370.2 298.547" style="stroke:#a80036;stroke-width:1.2"/><line style="stroke:#a80036;stroke-width:1.2" x1="367.8" x2="1111.8" y1="298.547" y2="298.547"/><text x="382.2" y="283.388" fill="#000" font-family="sans-serif" font-size="15.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8">3</text><text x="397.8" y="274.308" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="542.4">transfer(&quot;command/TENANT&quot;, &quot;command/TENANT/4711&quot;,&quot;${payload}&quot;)</text><text x="412.2" y="292.468" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="225.6">via AMQP messaging network</text><polygon fill="#A80036" points="693 346.866 705 351.666 693 356.466 697.8 351.666" style="stroke:#a80036;stroke-width:1.2"/><line style="stroke:#a80036;stroke-width:1.2" x1="361.8" x2="700.2" y1="351.666" y2="351.666"/><text x="370.2" y="336.507" fill="#000" font-family="sans-serif" font-size="15.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8">4</text><text x="385.8" y="327.427" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="242.4">get command handling adapter</text><text x="385.8" y="345.587" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="195.6">instances for device 4711</text><path fill="#FBFB77" d="M507.6,367.2656 L507.6,433.2656 L913.2,433.2656 L913.2,379.2656 L901.2,367.2656 L507.6,367.2656" filter="url(#f1h6xgtolsw5l8)" style="stroke:#a80036;stroke-width:1.2"/><path fill="#FBFB77" d="M901.2,367.2656 L901.2,379.2656 L913.2,379.2656 L901.2,367.2656" style="stroke:#a80036;stroke-width:1.2"/><text x="514.8" y="387.746" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="380.4">No adapter instance associated with device 4711,</text><text x="514.8" y="405.905" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="294">therefore check the gateways of 4711,</text><text x="514.8" y="424.065" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="265.2">preferably the last known gateway.</text><polygon fill="#A80036" points="375 483.262 363 488.063 375 492.863 370.2 488.063" style="stroke:#a80036;stroke-width:1.2"/><line style="stroke:#a80036;stroke-width:1.2;stroke-dasharray:2,2" x1="367.8" x2="712.2" y1="488.063" y2="488.063"/><text x="382.2" y="472.904" fill="#000" font-family="sans-serif" font-size="15.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8">5</text><text x="397.8" y="463.824" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="296.4">JSON containing adapter instance &quot;#1&quot;</text><text x="397.8" y="481.983" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="234">handling commands for &quot;gw-1&quot;</text><path fill="#FBFB77" d="M222,503.6625 L222,569.6625 L495.6,569.6625 L495.6,515.6625 L483.6,503.6625 L222,503.6625" filter="url(#f1h6xgtolsw5l8)" style="stroke:#a80036;stroke-width:1.2"/><path fill="#FBFB77" d="M483.6,503.6625 L483.6,515.6625 L495.6,515.6625 L483.6,503.6625" style="stroke:#a80036;stroke-width:1.2"/><text x="229.2" y="524.143" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="248.4">Command is already at the right</text><text x="229.2" y="542.302" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="238.8">adapter instance, gets handled</text><text x="229.2" y="560.462" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="246">by command handler for &quot;gw-1&quot;.</text><polygon fill="#A80036" points="155.4 601.5 143.4 606.3 155.4 611.1 150.6 606.3" style="stroke:#a80036;stroke-width:1.2"/><line style="stroke:#a80036;stroke-width:1.2" x1="148.2" x2="360.6" y1="606.3" y2="606.3"/><text x="162.6" y="600.221" fill="#000" font-family="sans-serif" font-size="15.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8">6</text><text x="178.2" y="600.221" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="175.2">Command is published</text><path fill="#FBFB77" d="M26.4,621.9 L26.4,669.9 L252,669.9 L252,633.9 L240,621.9 L26.4,621.9" filter="url(#f1h6xgtolsw5l8)" style="stroke:#a80036;stroke-width:1.2"/><path fill="#FBFB77" d="M240,621.9 L240,633.9 L252,633.9 L240,621.9" style="stroke:#a80036;stroke-width:1.2"/><text x="33.6" y="642.38" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="176.4">The gateway sends the</text><text x="33.6" y="660.54" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="200.4">command to device 4711.</text><polygon fill="#A80036" points="1098.6 701.578 1110.6 706.378 1098.6 711.178 1103.4 706.378" style="stroke:#a80036;stroke-width:1.2"/><line style="stroke:#a80036;stroke-width:1.2" x1="361.8" x2="1105.8" y1="706.378" y2="706.378"/><text x="370.2" y="700.299" fill="#000" font-family="sans-serif" font-size="15.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8">7</text><text x="385.8" y="700.299" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="411.6">disposition(&quot;accepted&quot;) via AMQP messaging network</text></g></svg>