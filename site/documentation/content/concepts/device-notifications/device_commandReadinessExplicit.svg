<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1803.6" height="711.6" contentScriptType="application/ecmascript" contentStyleType="text/css" style="width:1803px;height:711px" preserveAspectRatio="none" version="1.1" viewBox="0 0 1803 711" zoomAndPan="magnify"><defs><filter id="f1r9pxs4xq39he" width="300%" height="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.4"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.8" dy="4.8" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><line style="stroke:#a80036;stroke-width:1.2;stroke-dasharray:5,5" x1="48" x2="48" y1="45.956" y2="663.384"/><line style="stroke:#a80036;stroke-width:1.2;stroke-dasharray:5,5" x1="789" x2="789" y1="45.956" y2="663.384"/><line style="stroke:#a80036;stroke-width:1.2;stroke-dasharray:5,5" x1="1253.4" x2="1253.4" y1="45.956" y2="663.384"/><line style="stroke:#a80036;stroke-width:1.2;stroke-dasharray:5,5" x1="1527.6" x2="1527.6" y1="45.956" y2="663.384"/><rect style="stroke:#a80036;stroke-width:1.7999999999999998" width="73.2" height="36.356" x="9.6" y="3.6" fill="#FEFECE" filter="url(#f1r9pxs4xq39he)"/><text x="18" y="27.594" fill="#000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="56.4">Device</text><rect style="stroke:#a80036;stroke-width:1.7999999999999998" width="73.2" height="36.356" x="9.6" y="662.184" fill="#FEFECE" filter="url(#f1r9pxs4xq39he)"/><text x="18" y="686.178" fill="#000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="56.4">Device</text><rect style="stroke:#a80036;stroke-width:1.7999999999999998" width="204" height="36.356" x="684.6" y="3.6" fill="#FEFECE" filter="url(#f1r9pxs4xq39he)"/><text x="693" y="27.594" fill="#000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="187.2">HTTP Protocol Adapter</text><rect style="stroke:#a80036;stroke-width:1.7999999999999998" width="204" height="36.356" x="684.6" y="662.184" fill="#FEFECE" filter="url(#f1r9pxs4xq39he)"/><text x="693" y="686.178" fill="#000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="187.2">HTTP Protocol Adapter</text><rect style="stroke:#a80036;stroke-width:1.7999999999999998" width="170.4" height="36.356" x="1165.8" y="3.6" fill="#FEFECE" filter="url(#f1r9pxs4xq39he)"/><text x="1174.2" y="27.594" fill="#000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="153.6">AMQP 1.0 Network</text><rect style="stroke:#a80036;stroke-width:1.7999999999999998" width="170.4" height="36.356" x="1165.8" y="662.184" fill="#FEFECE" filter="url(#f1r9pxs4xq39he)"/><text x="1174.2" y="686.178" fill="#000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="153.6">AMQP 1.0 Network</text><rect style="stroke:#a80036;stroke-width:1.7999999999999998" width="198" height="36.356" x="1426.8" y="3.6" fill="#FEFECE" filter="url(#f1r9pxs4xq39he)"/><text x="1435.2" y="27.594" fill="#000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="181.2">Consumer Application</text><rect style="stroke:#a80036;stroke-width:1.7999999999999998" width="198" height="36.356" x="1426.8" y="662.184" fill="#FEFECE" filter="url(#f1r9pxs4xq39he)"/><text x="1435.2" y="686.178" fill="#000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="181.2">Consumer Application</text><path fill="#FBFB77" d="M54,63.9563 L54,111.9563 L476.4,111.9563 L476.4,75.9563 L464.4,63.9563 L54,63.9563" filter="url(#f1r9pxs4xq39he)" style="stroke:#a80036;stroke-width:1.2"/><path fill="#FBFB77" d="M464.4,63.9563 L464.4,75.9563 L476.4,75.9563 L464.4,63.9563" style="stroke:#a80036;stroke-width:1.2"/><text x="61.2" y="84.436" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="397.2">sending explicit event to signal command readiness</text><text x="61.2" y="102.596" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="181.2">for the next 60 seconds</text><path fill="#FBFB77" d="M54,129.075 L54,177.075 L493.2,177.075 L493.2,141.075 L481.2,129.075 L54,129.075" filter="url(#f1r9pxs4xq39he)" style="stroke:#a80036;stroke-width:1.2"/><path fill="#FBFB77" d="M481.2,129.075 L481.2,141.075 L493.2,141.075 L481.2,129.075" style="stroke:#a80036;stroke-width:1.2"/><text x="61.2" y="149.555" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="414">The HTTP specific header &quot;hono-ttd&quot; is used to provide</text><text x="61.2" y="167.715" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="270">the value for ttd by the device itself</text><polygon fill="#A80036" points="774.6 208.753 786.6 213.553 774.6 218.353 779.4 213.553" style="stroke:#a80036;stroke-width:1.2"/><line style="stroke:#a80036;stroke-width:1.2" x1="48.6" x2="781.8" y1="213.553" y2="213.553"/><text x="57" y="207.474" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="711.6">POST event(hono-ttd=&quot;60&quot;, Content-Type=&quot;application/vnd.eclipse-hono-empty-notification&quot;)</text><path fill="#FBFB77" d="M608.4,229.1531 L608.4,331.1531 L963.6,331.1531 L963.6,241.1531 L951.6,229.1531 L608.4,229.1531" filter="url(#f1r9pxs4xq39he)" style="stroke:#a80036;stroke-width:1.2"/><path fill="#FBFB77" d="M951.6,229.1531 L951.6,241.1531 L963.6,241.1531 L951.6,229.1531" style="stroke:#a80036;stroke-width:1.2"/><text x="615.6" y="249.633" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="193.2">Set AMQP 1.0 properties:</text><text x="615.6" y="267.793" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="157.2">tenant-id: &quot;TENANT&quot;,</text><text x="615.6" y="285.952" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="133.2">device-id: &quot;4711&quot;,</text><text x="615.6" y="304.111" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="330">creation-time: NOW (in epoch milliseconds)</text><text x="615.6" y="322.271" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="176.4">ttd: value from http-ttd</text><polygon fill="#A80036" points="1239 363.309 1251 368.109 1239 372.909 1243.8 368.109" style="stroke:#a80036;stroke-width:1.2"/><line style="stroke:#a80036;stroke-width:1.2" x1="789" x2="1246.2" y1="368.109" y2="368.109"/><text x="797.4" y="362.03" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="435.6">1.0 transfer(&quot;event/TENANT&quot;, &quot;4711&quot;, , creation-time, ttd)</text><polygon fill="#A80036" points="1513.8 398.269 1525.8 403.069 1513.8 407.869 1518.6 403.069" style="stroke:#a80036;stroke-width:1.2"/><line style="stroke:#a80036;stroke-width:1.2" x1="1253.4" x2="1521" y1="403.069" y2="403.069"/><text x="1261.8" y="396.99" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="246">1.2 transfer(&quot;event/TENANT&quot;, ...)</text><polygon fill="#A80036" points="1266.6 433.228 1254.6 438.028 1266.6 442.828 1261.8 438.028" style="stroke:#a80036;stroke-width:1.2"/><line style="stroke:#a80036;stroke-width:1.2" x1="1259.4" x2="1527" y1="438.028" y2="438.028"/><text x="1273.8" y="431.949" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="205.2">2.0 disposition(&quot;accepted&quot;)</text><polygon fill="#A80036" points="802.2 468.188 790.2 472.988 802.2 477.788 797.4 472.988" style="stroke:#a80036;stroke-width:1.2"/><line style="stroke:#a80036;stroke-width:1.2" x1="795" x2="1252.2" y1="472.988" y2="472.988"/><text x="809.4" y="466.908" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="205.2">2.0 disposition(&quot;accepted&quot;)</text><polygon fill="#A80036" points="61.8 503.147 49.8 507.947 61.8 512.747 57 507.947" style="stroke:#a80036;stroke-width:1.2"/><line style="stroke:#a80036;stroke-width:1.2" x1="54.6" x2="787.8" y1="507.947" y2="507.947"/><text x="69" y="501.868" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="177.6">HTTP/1.1 202 Accepted</text><line style="stroke:#a80036;stroke-width:1.2" x1="1528.2" x2="1578.6" y1="542.906" y2="542.906"/><line style="stroke:#a80036;stroke-width:1.2" x1="1578.6" x2="1578.6" y1="542.906" y2="558.506"/><line style="stroke:#a80036;stroke-width:1.2" x1="1529.4" x2="1578.6" y1="558.506" y2="558.506"/><polygon fill="#A80036" points="1541.4 553.706 1529.4 558.506 1541.4 563.306 1536.6 558.506" style="stroke:#a80036;stroke-width:1.2"/><text x="1536.6" y="536.827" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="253.2">callbackIfValid(creation-time, ttd)</text><path fill="#FBFB77" d="M1314,574.1062 L1314,640.1062 L1736.4,640.1062 L1736.4,586.1062 L1724.4,574.1062 L1314,574.1062" filter="url(#f1r9pxs4xq39he)" style="stroke:#a80036;stroke-width:1.2"/><path fill="#FBFB77" d="M1724.4,574.1062 L1724.4,586.1062 L1736.4,586.1062 L1724.4,574.1062" style="stroke:#a80036;stroke-width:1.2"/><text x="1321.2" y="594.587" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="397.2">React if message indicates that currently the device</text><text x="1321.2" y="612.746" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="237.6">is ready to receive a command</text><text x="1321.2" y="630.905" fill="#000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="271.2">(e.g. by trying to send a command)</text></g></svg>